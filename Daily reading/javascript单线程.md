## javascript 单线程：

#### 为什么javascript在设计之初使用单线程？
这是因为JavaScript这门脚本语言诞生的使命所致：JavaScript为处理页面中用户的交互，以及操作DOM树、CSS样式树来给用户呈现一份动态而丰富的交互体验和服务器逻辑的交互处理。如果JavaScript是多线程的方式来操作这些UI DOM，则可能出现UI操作的冲突；在多线程的交互下，处于UI中的DOM节点就可能成为一个临界资源，假设存在两个线程同时操作一个DOM，而线程1要求浏览器删除DOM节点，线程2却希望修改这个节点的某些样式风格。这个时候浏览器就无法裁决采用哪一种策略了。当然我们可以为浏览器引入“排它锁”或者是“乐观锁”来解决这些冲突，但为了避免引入了更大的复杂性，所以JavaScript从诞生开始就选择了单线程执行。

#### javascript的异步和回调为什么是必须的？
因为javascript是单线程执行的语言，因此如果遇到一些IO任务，就会非常消耗时间（比如像后台请求接口，等待response）；因此，js在设计之初，就意识到了这一点，在js中将这些耗时的IO操作封装成了异步的方法，等这些任务完成后将后续的处理操作封装为js任务放入执行任务队列中，等待Js线程空闲的时候执行。

#### web worker是什么？有什么作用？
主要用于处理非I/O操作。
- IO密集型： 比如请求网页、读写文件等； 这类任务计算量较小
- 计算密集型： 复杂的算法等，比如在一个很大的列表里查找元素；这类任务计算量较大；
web worker在当前js的执行主线程中利用Worker类开辟一个额外的线程来加载和运行特定的js文件,这个新的线程和JavaScript的主线程之间并不会互相影响和阻塞执行的；并通过onMessage和postMessage来和主线程交换数据；
- web worker并没有改变js是单线程的特点，而是利用了宿主——浏览器才能开辟新的线程；同时web worker没有操控DOM的能力，对UI的操作都要委托给主线程。

#### 浏览器事件循环是什么？
因为很多js任务都是异步的，包括键盘、鼠标I/O输入输出事件、窗口大小的resize事件、定时器（setTimeout、setInterval）事件、Ajax请求网络I/O回调等。这些异步任务发生的时候，它们将会被放入浏览器的事件任务队列（Event Loop）中去。
- 例如用户在网页中点击了button事件，则它们会被放入在这个事件循环池中，需要等到JavaScript运行时执行线程空闲时候才会按照队列先进先出的原则被一一执行。
- 虽然JS是单线程执行的，但是浏览器并不是单线程执行的，有js的执行线程、UI的渲染线程、图片资源的加载线程、ajax请求线程等。chrome的每一个tab都被设计成一个进程；在Chrome设计中存在很多的进程，并利用进程间通讯来完成它们之间的同步。